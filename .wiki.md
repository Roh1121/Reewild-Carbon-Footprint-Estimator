# Project Summary
Reewild is developing a backend solution to inspire and reward conscious consumer choices through the **Carbon Foodprint Estimator**. This tool allows users to input dish names or upload photos to receive an estimated carbon score based on the ingredients, promoting sustainability in food consumption.

# Project Module Description
The backend API consists of the following core functionalities:
- **POST /estimate**: Accepts a dish name and returns an estimated carbon footprint based on inferred ingredients.
- **POST /estimate/image**: Accepts an image upload, identifies the dish and its ingredients, and returns the estimated carbon footprint.
- **POST /estimate/batch**: Processes multiple dishes in a single request.
- **GET /health**: Provides health status of the API.
- **GET /carbon-data/stats**: Returns statistics about the carbon data used.

# Directory Tree
```
.
├── Dockerfile           # Docker configuration for containerization
├── README.md            # Documentation and setup instructions
├── package.json         # Project dependencies and scripts
├── package-lock.json    # Locked versions of dependencies
├── public/              # Static files (images, etc.)
│   └── images/foodimage.jpg
├── src/                 # Source code for the backend
│   ├── index.ts         # Main entry point for the server
│   ├── middleware/      # Middleware for error handling
│   │   └── errorHandler.ts
│   ├── routes/          # API route definitions
│   │   └── estimate.ts
│   ├── services/        # Business logic and integrations
│   │   ├── carbonService.ts
│   │   ├── llmService.ts
│   │   └── visionService.ts
│   └── types.ts        # TypeScript interfaces and types
└── tsconfig.json        # TypeScript configuration
```

# File Description Inventory
- **Dockerfile**: Defines the environment for running the application using Docker.
- **README.md**: Contains documentation on usage, features, and setup instructions.
- **package.json**: Lists project dependencies and scripts for development and production.
- **src/index.ts**: Initializes the Express server and sets up middleware and routes.
- **src/types.ts**: Contains TypeScript interfaces for data structures used in the application.
- **src/services/**: Contains service files that handle business logic for carbon calculations, LLM integration, and vision processing.
- **src/routes/**: Defines the API routes and their corresponding handlers.
- **src/middleware/**: Contains error handling middleware to manage API errors.

# Technology Stack
- **Node.js**: Runtime environment for executing JavaScript server-side.
- **Express**: Web framework for building the API.
- **TypeScript**: Strongly typed programming language for improved code quality.
- **OpenAI API**: For LLM and vision model integrations.
- **Docker**: For containerization and deployment.
- **Zod**: For runtime validation of request schemas.
- **Multer**: Middleware for handling multipart/form-data, primarily for image uploads.

# Usage
### Installation
1. Clone the repository:
   ```bash
   git clone <repository-url>
   cd carbon-foodprint-estimator
   ```
2. Install dependencies:
   ```bash
   npm install
   ```

### Environment Setup
1. Copy the example environment file:
   ```bash
   cp .env.example .env
   ```
2. Edit `.env` to add your OpenAI API key and other configurations.

### Running the Application
- In development mode:
  ```bash
  npm run dev
  ```
- For production:
  ```bash
  npm run build
  npm start
  ```

### Docker Deployment
1. Build the Docker image:
   ```bash
   docker build -t carbon-foodprint-api .
   ```
2. Run the container:
   ```bash
   docker run -p 3000:3000 -e OPENAI_API_KEY=your_key carbon-foodprint-api
   ```
